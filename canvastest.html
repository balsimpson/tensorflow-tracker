<!DOCTYPE html>
<html>

<head>
	<title>
		HTML Webcam Capture Demo
	</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0" />
	<style>
		#vid-show,
		#vid-canvas,
		#vid-take {
			display: block;
			margin-bottom: 20px;
		}

		html,
		body {
			padding: 0;
			margin: 0;
		}
	</style>
</head>

<body>
	<div id="vid-controls">
		<canvas id="cnv" width="300" height="300"></canvas>
		<video style="display: none" id="vid-show" width="300" height="300" autoplay></video>
		<input id="vid-take" type="button" value="Take Photo" />
		<div id="vid-canvas"></div>
	</div>

	<script>
		var canvas = document.getElementById("cnv");
		var ctx = canvas.getContext("2d");

		var video = document.getElementById("vid-show");
		var videoImg = document.getElementById("vid-canvas");
		// video.src = "http://techslides.com/demos/sample-videos/small.mp4";

		navigator.getUserMedia({ video: true },
			stream => {
				video.srcObject = stream;
			}, error => reject())
		video.addEventListener('loadeddata', function () {
			// video.play();  // start playing
			update(); //Start rendering
		});

		function update() {
			ctx.drawImage(video, 0, 0, 256, 256);
			requestAnimationFrame(update); // wait for the browser to be ready to present another animation fram.       
		}

		function grabScreenshot() {
			ctx.drawImage(video, 0, 0, 300, 300);
			var img = new Image();
			img.src = canvas.toDataURL("image/png");
			img.width = 120;
			videoImg.appendChild(img);
		}
	</script>
</body>

</html>